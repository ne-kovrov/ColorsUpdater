# Troubleshooting - Устранение неполадок

## Проблема: Плагин не собирает каталог переменных

### Возможные причины и решения:

#### 1. Кэширование плагина в Figma
**Проблема**: Figma кэширует старую версию плагина.

**Решение**:
1. Закройте плагин
2. Перезапустите Figma
3. Откройте плагин заново

#### 2. Плагин не обновился
**Проблема**: Используется старая версия кода.

**Решение**:
1. Убедитесь, что `code.js` скомпилирован из `code.ts`
2. Перезапустите Figma
3. Откройте плагин заново

#### 3. Нет переменных в файле
**Проблема**: В файле нет локальных переменных.

**Решение**:
1. Убедитесь, что вы находитесь в файле библиотеки
2. Проверьте, что в файле есть переменные (Variables panel)
3. Переменные должны быть локальными (не из библиотеки)

#### 4. Ошибки в консоли
**Проблема**: JavaScript ошибки в коде плагина.

**Решение**:
1. Откройте Developer Tools в Figma (View → Developer → Show Console)
2. Проверьте ошибки в консоли
3. Перезапустите плагин

### Проверка работы:

1. **Откройте консоль разработчика** в Figma:
   - View → Developer → Show Console

2. **Запустите плагин** и нажмите "Собрать каталог"

3. **Проверьте логи** в консоли:
   ```
   Начинаем сбор каталога...
   Найдено переменных: X
   Найдено коллекций: Y
   Каталог собран, отправляем результат...
   Сообщение отправлено в UI
   ```

4. **Если ошибок нет**, но каталог не заполняется:
   - Проверьте, что в файле есть переменные
   - Убедитесь, что переменные локальные (не из библиотеки)

### Компиляция кода:

Если нужно перекомпилировать TypeScript:

```bash
npx tsc code.ts --outDir . --target es2017 --module commonjs --lib es2017 --skipLibCheck
```

### Отладка:

1. **Проверьте консоль** на наличие ошибок
2. **Убедитесь в наличии переменных** в файле
3. **Проверьте права доступа** к переменным
4. **Перезапустите Figma** для очистки кэша

### Контакты:

При возникновении проблем создайте issue в репозитории с описанием:
- Версии Figma
- Операционной системы
- Логов из консоли
- Шагов для воспроизведения
